The repository of the currently selected effect is shown on the titlebar.

The special effect file (.sef) without extension is listed in the rightside
panel. Click a file in the list to play or replay it.


MENUS

Resrepo (resource repository)
-------
list all effects - lists all available effects
stock only       - lists stock effects only (installation data folder)
module only      - lists module-level effects (if a module is loaded)
campaign only    - lists campaign-level effects (if a module with a campaign is
                   loaded)
override only    - lists effects in override only

Note: Those aren't absolute determinations; Module, Campaign, and Override check
merely for a substring in each effect's path: "modules", "campaigns", or
"override" respectively. Stock checks merely for the absence of those strings.

I might try to figure it out for real later ...

Events
------
Play - plays or replays the currently selected effect's enabled events
Stop - stops play

Note: Only the option DoubleCharacter lists and allows disabling individual
effect-events. The following items appear on the menu only if DoubleCharacter
has been selected:

Disable all events - disables all events
Enable all events  - re-enables all events

If and only if the DoubleCharacter option is selected does a list of events
appear in the menu. The events can be toggled on or off with a click. Keypress
[Shift] when clicking to play only that event. I had to sacrifice a chicken to
get that to work ...

Note: The toolset is a difficult environment to code for - visualeffects on
weapons, for instance, do not appear to render at all and the events of various
specialeffects render at a corner of the area-tiles instead of where they're
expected to be, in the center. SPECIALEFFECT_TYPE_LIGHTNING events are notably
positioned incorrectly at 0,0 and SPECIALEFFECT_TYPE_PARTICLE_MESH can appear at
200,200 if not using DoubleCharacter. etc

View
----
Double character     - see OPTIONS|Double character
Single character     - see OPTIONS|Single character
placed effect object - see OPTIONS|placed effect object
show Ground          - see OPTIONS|show Ground
show Options panel   - shows a panel on the left that has several options and
                       lists the currently selected effect's events
show extended info   - shows extended info about the currently selected effect's
                       events in the Options panel
scene data           - shows the SceneData dialog (see below)
stay on top          - keeps the plugin on top of the toolset when enabled
refocus              - focuses the camera to the center of the area

Help
----
help  - opens this textfile via Windows file-type association
about - opens a dialog with version and date of build


OPTIONS

When View|show Options panel is activated, several options are shown at the top
of the panel. The three radio-buttons select how the scene will be rendered:

Double character     - renders the scene with two NPCs. This creates source
                       and target creatures, and uses their attachment-nodes if
                       appropriate.
Single character     - renders the scene with a single NPC. This applies the
                       currently selected effect to a single creature using its
                       'AppearanceSEF' property
placed effect object - renders the effect on a placed-effect object

Note: Deciding which option above to use depends on the special effect file and
the usage that you intend to put it to for NwN2 play.

show Ground - toggles the ground on and off. Some effect-events have textures
              that only render on the ground

The currently selected effect's events will be listed beneath those options.
They are simply informational and can't be edited here; if you want to edit a
special effect or any of its events, breakout the files (they are listed) and
open them in the stock VFXEditor plugin or other.


BUTTONS

Clear - clears the scene
Copy  - copies the label of the currently selected special effect file to the
        Windows clipboard
Close - closes the plugin

filtr - toggles the effects-list filter on and off. Enter a string in search and
        click the filter button to set a filter-string. A filtered list can
        still be searched by typing a different string in search. To apply a
        different filter, enter a different string and toggle the filter button.
        The filter respects the currently selected Resrepo and vice versa


MOUSE

RMB-drag           - pans the camera up/down/left/right
RMB-drag + Control - rotates the camera around its focal point
Mousewheel         - zooms the camera in/out

Note: The display panel must be focused to adjust the camera.


KEYBOARD

Enter  - plays the currently selected effect if the effects list or the scene
         panel has focus. Searches if search is focused (Shift+Enter to search
         ascending), toggles the list filter if the filter button has focus
Escape - closes the plugin


General Info
------------
These are the types of effect-events:

SPECIALEFFECT_TYPE_BEAM
SPECIALEFFECT_TYPE_BILLBOARD
SPECIALEFFECT_TYPE_GAME_MODEL_EFFECT
SPECIALEFFECT_TYPE_LIGHT
SPECIALEFFECT_TYPE_LIGHTNING
SPECIALEFFECT_TYPE_LINE_PARTICLE_EMITTER
SPECIALEFFECT_TYPE_MODEL
SPECIALEFFECT_TYPE_PARTICLE_EMITTER
SPECIALEFFECT_TYPE_PARTICLE_MESH
SPECIALEFFECT_TYPE_PROJECTED_TEXTURE
SPECIALEFFECT_TYPE_SOUND
SPECIALEFFECT_TYPE_TRAIL


the SceneData dialog
--------------------
The SceneData dialog can be opened under View|scene data [Ctrl+n]. It's a
readonly dialog that's intended to show information about objects in the scene.
For the SpecialEffectsViewer, the objects are models and specialeffects. The
options DoubleCharacter, SingleCharacter, and PlacedEffectObject handle
specialeffects differently: the DoubleCharacter option leverages toolset-code
[SEFGroup] which creates source and target creatures and can therefore handle
specialeffects that require a target-creature; the SingleCharacter option
creates only 1 creature and applies a specialeffect only to its AppearanceSEF
property; the PlacedEffectOption merely creates a generic PlacedEffect and
applies a specialeffect to it.

See OPTIONS above.

This gets tricky because specialeffects are objects in the display-panel also -
but only while they are being actively updated by the panel. If information
about them is gathered too quickly, it will be incomplete since it takes a
fraction of a second for the panel to instantiate them; if too slowly, the
objects will have disappeared from the panel. So, to get complete information
about the scene including its specialeffects, there is an option in the toolset
under View|Options|Plugins|Special Effects Viewer|SceneData dialog:
SceneDataDelay. Its default value is 350 milliseconds.

It should be set as fast as possible without throwing an
InvalidOperationException (see the description of the SceneDataDelay property).
I believe it depends on how slow or fast your CPU is: faster CPUs can handle a
shorter delay. I believe that there is an underlying issue with multi-threading
in the toolset libraries (ie, a race condition). The very minimum value is 15
milliseconds, which is a limitation of the .NET libraries (a standard Timer
can't tick faster than about that).

The most troublesome specialeffect I've found is fx_item_blood (SoZ) w/ 41
objects. You can test your system by selecting it with the SceneData dialog
open.

Note that you can manually update the SceneData dialog by pressing [F5] when the
dialog has focus. Otherwise it updates auto (after the above described delay)
when the SpecialEffectsViewer updates the current specialeffect in its display-
panel. The dialog will always open initially without showing any information
since I couldn't get that to work reliably.

Note also that not all events in a specialeffect are actually instantiated as
objects in the display-panel, and that conversely an event can instantiate into
several objects. That is the relation is not necessarily 1:1 ...


Preferences
-----------
%localappdata%\NWN2 Toolset\Plugins\SpecialEffectsViewer.xml
